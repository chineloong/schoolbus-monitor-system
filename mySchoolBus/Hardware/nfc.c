#include "nfc.h"
#include "string.h"
extern UART_HandleTypeDef huart2;

const uint8_t nfc_ack[]={00, 00 ,0xFF ,0x0C ,0xF4};

uint8_t nfcdata;
uint8_t nfc_frame[50]={0};
uint8_t nfcRecv[50]={0};


const uint8_t nfc_start[24]={0x55,0x55,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x03,0xFD,0xD4,0x14,0x01,0x17,0x00,};
const uint8_t nfc_find[11]={00 ,0x00 ,0xFF ,0x04 ,0xFC,0xD4 ,0x4A ,0x02 ,00 ,0xE0 ,00};
const uint8_t nfc_read[]={0x00, 0x00, 0xFF, 0x05, 0xFB, 0xD4, 0x40, 0x01, 0x30, 0x02, 0xB9, 0x00};
const uint8_t nfc_reply[]={00,00 ,0xFF ,00 ,0xFF ,00};


struct nfc_data mynfc;
enum nfc_order nfc;


void nfc_WakeUp(void)
{
	HAL_UART_Transmit(&huart2,&nfc_start[0],24,100);

}

void nfc_findCard(void)
{

	HAL_UART_Transmit(&huart2,&nfc_find[0],11,100);
	nfc = find;
	HAL_UART_Receive_IT(&huart2,&nfc_frame[0],25);
	memcpy(&mynfc,&nfcRecv,sizeof(mynfc));

}
